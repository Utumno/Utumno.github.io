<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Udun's Labs]]></title>
  <link href="http://Utumno.github.io/atom.xml" rel="self"/>
  <link href="http://Utumno.github.io/"/>
  <updated>2014-06-19T14:17:26+01:00</updated>
  <id>http://Utumno.github.io/</id>
  <author>
    <name><![CDATA[Utumno]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Mavenize an Eclipse Project]]></title>
    <link href="http://Utumno.github.io/blog/2014/06/11/mavenize-an-eclipse-project/"/>
    <updated>2014-06-11T18:13:15+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/06/11/mavenize-an-eclipse-project</id>
    <content type="html"><![CDATA[<p>I had a simple eclipse java SE project and I wanted to start using maven (<a href="http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html">in 5 Minutes</a>) for dependency management. What I did was (eclipse Luna, JEE pack - comes with m2e plugin [1.5.0.20140524-0005]):</p>

<ul>
<li><p>RClick on the project > Configure > Convert to Maven project</p></li>
<li><p><strong>Maven Pom dialogue</strong>: I had to choose group id, artifact id etc. Had a look at <a href="http://maven.apache.org/guides/mini/guide-naming-conventions.html">Guide to naming conventions on groupId, artifactId and version</a>, <a href="http://stackoverflow.com/questions/3724415/maven-artifact-and-groupid-naming">Maven artifact and groupId naming</a>, <a href="http://stackoverflow.com/questions/23172586/maven-artifact-and-group-naming-conventions?lq=1">Maven artifact and group naming conventions</a>. Ok - pick a groupId (should be unique), an artifact Id (will be the name of your jar minus the version) and a version (have to decide on a scheme for this - must read: <a href="http://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm">Understanding Maven Version Numbers</a>. Have also a look at <a href="http://stackoverflow.com/q/30571/281545">How do I tell Maven to use the latest version of a dependency?</a>). Enter a name and description for your project.</p></li>
<li><p><strong>Maven dependencies dialogue</strong>: Identify existing project references as Maven dependencies:</p>

<p><img class="center" src="http://Utumno.github.io/images/Maven_and_eclipse/Clipboard01.jpg" title="image" alt="images"></p>

<p>well at a loss here&hellip; Glad it found Junit. I left the &ldquo;Delete original references from project&rdquo; unticked. It went on to create the POM. Now I cheated a bit here.
<!-- more --></p>

<ul>
<li><p>I had already tried once and saw the Unidentified dependencies pictured above. Well - hamcrest was resolved but jgrapht not - resulting in build errors. What I had to do was <a href="https://www.google.com/search?q=maven%20jgrapht%200.9.0&amp;safe=off">google &ldquo;maven jgrapht 0.9.0&rdquo;</a> and at long last end up <a href="http://mvnrepository.com/artifact/org.jgrapht/jgrapht-core/0.9.0">here</a>. Copied:</p>

<pre><code class="`">&lt;dependency&gt;
    &lt;groupId&gt;org.jgrapht&lt;/groupId&gt;
    &lt;artifactId&gt;jgrapht-core&lt;/artifactId&gt;
    &lt;version&gt;0.9.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>in the pom and was good to go.</p></li>
<li><p>Now the second time I followed the same procedure (after <code>--hard</code> reseting the branch) apparently m2e kept the jgrapht jar in its cache. So despite the fact the jars showed as unidentified the second time round I had no built errors. Actually I don&rsquo;t know what the reason was but the diff from the first time up to the second was:</p>

<pre><code class="`"> $ git diff 1stTry 2ndTry
 diff --git a/.classpath b/.classpath
 index a92a607..c5171d8 100644
 --- a/.classpath
 +++ b/.classpath
 @@ -11,6 +11,8 @@
            &lt;attribute name="maven.pomderived" value="true"/&gt;
        &lt;/attributes&gt;
    &lt;/classpathentry&gt;
 +  &lt;classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/jgraph"/&gt;
 +  &lt;classpathentry kind="con" path="org.eclipse.jdt.junit.JUNIT_CONTAINER/4"/&gt;
    &lt;classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"&gt;
        &lt;attributes&gt;
            &lt;attribute name="maven.pomderived" value="true"/&gt;
 diff --git a/.settings/CCM_RUN.launch b/.settings/CCM_RUN.launch
 index 3cc26b2..632106d 100644
 --- a/.settings/CCM_RUN.launch
 +++ b/.settings/CCM_RUN.launch
 @@ -6,8 +6,6 @@
 &lt;listAttribute key="org.eclipse.debug.core.MAPPED_RESOURCE_TYPES"&gt;
 &lt;listEntry value="1"/&gt;
 &lt;/listAttribute&gt;
 -&lt;stringAttribute key="org.eclipse.jdt.launching.CLASSPATH_PROVIDER" value="org.eclipse.m2e.launchconfig.classpathProvider"/&gt;
 &lt;stringAttribute key="org.eclipse.jdt.launching.MAIN_TYPE" value="gr.uoa.di.mde515.Main"/&gt;
 &lt;stringAttribute key="org.eclipse.jdt.launching.PROJECT_ATTR" value="project"/&gt;
 -&lt;stringAttribute key="org.eclipse.jdt.launching.SOURCE_PATH_PROVIDER" value="org.eclipse.m2e.launchconfig.sourcepathProvider"/&gt;
 &lt;/launchConfiguration&gt;
 diff --git a/pom.xml b/pom.xml
 index 0f9e725..dffb4a5 100644
 --- a/pom.xml
 +++ b/pom.xml
 @@ -1,20 +1,17 @@
 &lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    #### UNIMPORTANT ###
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.11&lt;/version&gt;
        &lt;/dependency&gt;
 -      &lt;dependency&gt;
 -          &lt;groupId&gt;org.jgrapht&lt;/groupId&gt;
 -          &lt;artifactId&gt;jgrapht-core&lt;/artifactId&gt;
 -          &lt;version&gt;0.9.0&lt;/version&gt;
 -      &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;
</code></pre>

<p>It seems the second time it kept <code>jgrapht</code> as an eclipse lib. Dunno. Runs fine.</p></li>
</ul>
</li>
<li><p>I added the jgrapht as a maven dependency - as well as logging:</p>

<pre><code class="```">  +       &lt;dependency&gt;
  +           &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
  +           &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
  +           &lt;version&gt;1.1.2&lt;/version&gt;
  +       &lt;/dependency&gt;
  +       &lt;dependency&gt;
  +           &lt;groupId&gt;org.jgrapht&lt;/groupId&gt;
  +           &lt;artifactId&gt;jgrapht-core&lt;/artifactId&gt;
  +           &lt;version&gt;0.9.0&lt;/version&gt;
  +       &lt;/dependency&gt;
</code></pre>

<p>yep - that&rsquo;s all (see <a href="http://stackoverflow.com/questions/16660749/dependency-management-for-slf4j-and-logback/16661493#16661493">Dependency management for SLF4J and Logback</a>). Wow !</p></li>
<li><p>But now I wanted to add the logging configuration (must read:  <a href="https://wiki.base22.com/display/btg/How+to+setup+SLF4J+and+LOGBack+in+a+web+app+-+fast">How to setup SLF4J and LOGBack in a web app - fast</a>). In this article (from where I downloaded the <code>logback[-test].xml</code>) it is said that these files belong in the <code>src/[main|test]/resources</code> folder. Great. I went ahead and manually moved the <code>src</code> to <code>src/main/java</code>, deleted <code>src</code> in Build path > source folders and added <code>src/main/java</code>. Classpath:</p>

<pre><code class="```">  -   &lt;classpathentry kind="src" output="target/classes" path="src"&gt;
  -       &lt;attributes&gt;
  -           &lt;attribute name="optional" value="true"/&gt;
  -           &lt;attribute name="maven.pomderived" value="true"/&gt;
  -       &lt;/attributes&gt;
  -   &lt;/classpathentry&gt;
  +   &lt;classpathentry kind="src" path="src/main/java"/&gt;
</code></pre>

<p>Then tried to Alt+F5 (RClick > Maven > Update Project&hellip;) but I had the &ldquo;nesting errors&rdquo;:</p></li>
</ul>


<blockquote><p>MESSAGE Cannot nest &lsquo;project/src/main/java&rsquo; inside &lsquo;project/src&rsquo;. To enable the nesting exclude &lsquo;main/&rsquo; from &lsquo;project/src&rsquo;</p></blockquote>

<p>  Gibberish. Solved in <a href="http://stackoverflow.com/questions/10838109/eclipse-build-path-nesting-errors/15411137#15411137">Eclipse Build Path Nesting Errors</a>. Basically there was a line in the pom that caused the problem - hitting then Alt+F5 modified the classpath:</p>

<pre><code>---------------------------------- .classpath ----------------------------------
index 37a3013..982ad3d 100644
@@ -1,6 +1,11 @@
 &lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;classpath&gt;
-   &lt;classpathentry kind="src" path="src/main/java"/&gt;
+   &lt;classpathentry kind="src" output="target/classes" path="src/main/java"&gt;
+       &lt;attributes&gt;
+           &lt;attribute name="optional" value="true"/&gt;
+           &lt;attribute name="maven.pomderived" value="true"/&gt;
+       &lt;/attributes&gt;
+   &lt;/classpathentry&gt;
    &lt;classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"&gt;
        &lt;attributes&gt;
            &lt;attribute name="maven.pomderived" value="true"/&gt;
@@ -12,5 +17,11 @@
            &lt;attribute name="maven.pomderived" value="true"/&gt;
        &lt;/attributes&gt;
    &lt;/classpathentry&gt;
+   &lt;classpathentry kind="src" output="target/test-classes" path="src/test/java"&gt;
+       &lt;attributes&gt;
+           &lt;attribute name="optional" value="true"/&gt;
+           &lt;attribute name="maven.pomderived" value="true"/&gt;
+       &lt;/attributes&gt;
+   &lt;/classpathentry&gt;
    &lt;classpathentry kind="output" path="target/classes"/&gt;
 &lt;/classpath&gt;

----------------------------------- pom.xml -----------------------------------
index 6b5f4af..8f37398 100644
@@ -24,7 +24,6 @@
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
-       &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
</code></pre>

<p> So m2e actually automatically added a test folder (which was not created resulting in an error in the build path - but not on the markers view - you need to open the build path to see it). So what about the resources folders ? Well just create two new <strong>folders</strong> (<strong>NOT</strong> source folders) and hit Alt+F5. Boom:</p>

<pre><code>6/12/14, 12:57:19 AM GMT+1: [INFO] Update started
6/12/14, 12:57:19 AM GMT+1: [INFO] Using org.eclipse.m2e.jdt.JarLifecycleMapping lifecycle mapping for MavenProject: gr.uoa.di.mde515.ccm:ccm:0.0.1-SNAPSHOT @ C:\Dropbox\eclipse_workspaces\javaSE\hw2_db\pom.xml.
6/12/14, 12:57:19 AM GMT+1: [INFO] Adding source folder /hw2_db/src/main/java
6/12/14, 12:57:19 AM GMT+1: [INFO] Adding resource folder /hw2_db/src/main/resources
6/12/14, 12:57:19 AM GMT+1: [INFO] Adding source folder /hw2_db/src/test/java
6/12/14, 12:57:19 AM GMT+1: [INFO] Adding resource folder /hw2_db/src/test/resources
6/12/14, 12:57:19 AM GMT+1: [ERROR] The resource tree is locked for modifications.
6/12/14, 12:57:19 AM GMT+1: [INFO] Using org.eclipse.m2e.jdt.JarLifecycleMapping lifecycle mapping for MavenProject: gr.uoa.di.mde515.ccm:ccm:0.0.1-SNAPSHOT @ C:\Dropbox\eclipse_workspaces\javaSE\hw2_db\pom.xml.
6/12/14, 12:57:19 AM GMT+1: [INFO] Update completed: 0 sec
6/12/14, 12:57:20 AM GMT+1: [WARN] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
6/12/14, 12:57:20 AM GMT+1: [INFO] Copying 0 resource
6/12/14, 12:57:20 AM GMT+1: [WARN] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
6/12/14, 12:57:20 AM GMT+1: [INFO] Copying 0 resource
</code></pre>

<p>  Dunno if I should worry about <code>[ERROR] The resource tree is locked for modifications.</code> Alt+F5 produces:</p>

<pre><code>---------------------------------- .classpath ----------------------------------
index 982ad3d..8e85ec6 100644
@@ -23,5 +23,15 @@
            &lt;attribute name="maven.pomderived" value="true"/&gt;
        &lt;/attributes&gt;
    &lt;/classpathentry&gt;
+   &lt;classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"&gt;
+       &lt;attributes&gt;
+           &lt;attribute name="maven.pomderived" value="true"/&gt;
+       &lt;/attributes&gt;
+   &lt;/classpathentry&gt;
+   &lt;classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"&gt;
+       &lt;attributes&gt;
+           &lt;attribute name="maven.pomderived" value="true"/&gt;
+       &lt;/attributes&gt;
+   &lt;/classpathentry&gt;
    &lt;classpathentry kind="output" path="target/classes"/&gt;
 &lt;/classpath&gt;
</code></pre>

<p> Great. Now that I seem to get the hang of it I will turn to WTP project mavenizing.</p>

<p>Related:</p>

<ul>
<li><a href="http://stackoverflow.com/questions/2449461/convert-existing-eclipse-project-to-maven-project">Convert Existing Eclipse Project to Maven Project</a>: interesting links to m2e TODOs - yes it is still primitive&hellip;

<ul>
<li><a href="https://wiki.eclipse.org/M2E_project_conversion_enhancements">M2E project conversion enhancements</a>, dreary eclipse wiki, the wiki of the dead roads etc</li>
<li><a href="https://github.com/vashishthask/eclipse-to-maven/tree/master/src/main/java">eclipse-to-maven</a>: purports to do the thing (for eclipse kepler (?))</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JBoss on Eclipse Luna]]></title>
    <link href="http://Utumno.github.io/blog/2014/05/25/jboss-on-eclipse-luna/"/>
    <updated>2014-05-25T20:12:58+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/05/25/jboss-on-eclipse-luna</id>
    <content type="html"><![CDATA[<p>Windows - the <a href="https://docs.jboss.org/author/display/AS7/Installing+and+starting+JBoss+AS+on+Windows">Installing and starting JBoss AS on Windows</a> page says I must have both maven and java installed - I really do not get why maven so I decided to proceed at my discretion.</p>

<ul>
<li>Downloaded <del>jboss-eap-6.2.0.zip</del> from <a href="http://jbossas.jboss.org/downloads.">http://jbossas.jboss.org/downloads.</a> A hell of a difficult site to locate. Btw the user friendliness of the JBoss site(s) is minimal - take a peek at the <a href="https://docs.jboss.org/author/display/AS7/Getting+Started+Developing+Applications+Guide">Getting Started Developing Applications Guide</a> it says &ldquo;This guide has move (sic) to <a href="http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/guide/Introduction/">http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/guide/Introduction/</a>&rdquo; - the latter link being broken. Plus the community servers are down.</li>
<li>Realized that this download is (probably - <strong>EDIT EDIT</strong>: <a href="http://stackoverflow.com/questions/17995281/jboss-7-x-or-jboss-eap-6-x">JBoss 7.x or JBoss EAP 6.x</a>) not what I wanted. The <a href="https://docs.jboss.org/author/display/AS7/Installing+and+starting+JBoss+AS+on+Windows">Installing and starting JBoss AS on Windows</a> says something about jboss-7.x.x.x - scrolling further down in <a href="http://jbossas.jboss.org/downloads">http://jbossas.jboss.org/downloads</a> I located and downloaded JBoss AS 7.1.1.Final (jboss-as-7.1.1.Final.zip).</li>
<li>Unzipped jboss-as-7.1.1.Final.zip to my c:\dev</li>
<li>Fired eclipse up (Luna M7 Release (4.4.0M7) - EE pack) - located the update site of Jboss tools for Luna (installing them via the servers&#8217; view failed with dependency errors) -  <a href="http://download.jboss.org/jbosstools/updates/development/luna/">http://download.jboss.org/jbosstools/updates/development/luna/</a>  - downloaded only JBossAS Tools 3.0.0.Beta1-v20140408-1231-B31, accepted, restarted, and the fun part started</li>
<li>Servers > New > JBoss AS 7.1 - profile Local (&hellip;), this server requires a runtime Next</li>
<li>JBoss 7.1 Runtime: download and install runtime, duh. let&rsquo;s see

<ul>
<li>one of the runtimes (3) it offers to download is the jboss-as-7.1.1.Final.zip - great - go to Browse</li>
<li>c:\dev\jboss-as-7.1.1.Final, Execution environment JavaSE-1.6 (jdk 1.6.0.45) done</li>
</ul>
</li>
<li>import the project, make a new branch (jbossAS7)</li>
<li>run - oops:

<blockquote><p>WARN  [org.jboss.modules] (MSC service thread 1-6) Failed to define class x.y.Z in Module &ldquo;deployment.DataCollectionServlet.war:main&rdquo; from Service Module Loader: java.lang.UnsupportedClassVersionError: x/y/Z : Unsupported major.minor version 51.0</p></blockquote></li>
</ul>


<p> yep the project was 1.7 after all</p>

<ul>
<li>deleted the server, created it anew, pointed the runtime of Jboss server to jdk 7 and <strong>it run</strong> - logging needs to be info though to print anything in eclipse&rsquo;s console.</li>
<li>yes but I couldn&rsquo;t hit the servlet - found the solution here: <a href="http://stackoverflow.com/questions/6853409/binding-jboss-as-7-to-all-interfaces">Binding JBoss AS 7 to all interfaces</a>. In a nutshell I had to edit the server config at <code>C:\dev\jboss-as-7.1.1.Final\standalone\configuration\standalone.xml</code> - in there is the logging config too&hellip;</li>
</ul>


<p>That was it - so basically zero modifications. Now to open shift&hellip;</p>

<!-- more -->


<h3>OpenShift</h3>

<ul>
<li>Download the open shift JBoss tools from the same update site (<a href="http://download.jboss.org/jbosstools/updates/development/luna/">http://download.jboss.org/jbosstools/updates/development/luna/</a>) - JBoss OpenShift Tools (2.6.0.Beta1-v20140401-0009-B15)</li>
<li>Hard part. New > Openshift application (use search), sign in to open shift (TODO: where does Eclipse store the passwords (bugzilla, openshift etc ?) - hope not in eclipse.core.runtime) > existing application (had created a jboss one) > Use existing project + create server for publishing + disable maven build > Use default remote name (untick, tick > openshift (?)) > Finish</li>
<li>Scary warning about converting my project - back up original and have Beyond Compare handy</li>
<li>Accept - cross fingers</li>
<li>Starts downloading the repo from openshift - wish it just used github somehow&hellip; (edit: see <a href="http://blog.anthavio.net/2014/01/deploy-to-openshift-from-github.html">this blog post</a>)</li>
<li><p>OpenShift asks to publish - answer no and fire BC. .git/config only added a remote:</p>

<pre><code>  [remote "openshift"]
      url = ssh://SHA@APP-DOMAIN.rhcloud.com/~/git/jbossas.git/
</code></pre>

<p>good (<code>SHA</code> above stands for an hexadecimal number, the app&rsquo;s UUID apparently)</p></li>
<li><p>.gitignore added</p>

<pre><code>  target
  .settings/*
  !.settings/.jsdtscope
  .project
  .classpath
</code></pre>

<p>still wander what will it do with build - notice .project .classpath removed - target added</p></li>
<li>Added an <code>\.openshift\markers\</code> path containing only <code>skip_maven_build</code>, a <code>\.settings\org.jboss.tools.openshift.express.ui.prefs</code> file with deployment info and</li>
<li>In .git it added a remote entry but also messed with HEAD and master&rsquo;s head - gitk: wow - a <code>Commit from JBoss Tools</code> - the changes detailed below + line endings diffs - noticed it reverts one previous line endings commit of mine - amending! <em>Why noone gets line endings right ever ?</em></li>
<li><p>Allright - backing the commit up (tag the original Commit from JBoss Tools)  amend, take in some unstaged line endings diffs (!) which effectively undo the reverting of my commit - finally:</p>

<pre><code>  diff --git a/.gitignore b/.gitignore
  index 7f55666..3170c67 100644
  --- a/.gitignore
  +++ b/.gitignore
  // blah blah
  +target
  +.settings/*
  +!.settings/.jsdtscope
  +.project
  +.classpath
  diff --git a/.openshift/markers/skip_maven_build b/.openshift/markers/skip_maven
  new file mode 100644
  index 0000000..e69de29
</code></pre>

<p>commit additional line endings diffs in a new branch to examine never</p></li>
<li><p>more rebases etc and push (from git gui - allows forced updates) - <del>done</del> ! Well, not done - git reported success but the remote refs seen in gitk stayed put. I had to push from eclipse: Servers > APP at Openshift > Publish - &ldquo;no local changes - publish by pushing ?&rdquo; -> this now asks you if you want a forced update - yes:</p>

<pre><code>  Stopping jbossas cartridge
  Sending SIGTERM to jboss:301473 ...
  Building git ref 'master', commit e48bedf
  Skipping Maven build due to absence of pom.xml
  Preparing build for deployment
  Deployment id is 72c749b6
  Activating deployment
  Deploying JBoss
  Starting jbossas cartridge
  Found 127.2.148.129:8080 listening port
  Found 127.2.148.129:9999 listening port
  /var/lib/openshift/SHA/jbossas/standalone/deployments /var/lib/openshift/SHA/jbossas
  /var/lib/openshift/SHA/jbossas
  Artifacts deployed: ./ROOT.war
  -------------------------
  Git Post-Receive Result: success
  Activation status: success
  Deployment completed with status: success
</code></pre>

<p>Wow - but where is my app ? Hmmm: <a href="http://stackoverflow.com/questions/23873296/openshift-root-war-deployed-but-no-app">http://stackoverflow.com/questions/23873296/openshift-root-war-deployed-but-no-app</a></p></li>
</ul>


<p>Producing manually the war (right click on the project then export as war) and then scp&#8217;ing straight from git Bash (msysgit, mingwin):</p>

<pre><code>$ scp "~/ROOT.war" SHA@APP-DOMAIN.rhcloud.com:/var/lib/\
openshift/SHA/app-root/dependencies/jbossas/deployments
</code></pre>

<p>as detailed <a href="https://www.openshift.com/kb/kb-e1088-how-to-deploy-pre-compiled-java-applications-war-and-ear-files-onto-your-openshift-gear">here</a> (detailed is an euphemism) solved it.</p>

<p>But now I am getting a class not found at my app&rsquo;s url (better than the default OpenShift page but still&hellip;):</p>

<blockquote><p>root cause</p>

<p>java.lang.ClassNotFoundException: gr.uoa.di.monitoring.server.servlets.DataCollectionServlet from [Module &ldquo;deployment.ROOT.war:main&rdquo; from Service Module Loader]
    org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    org.jboss.as.web.deployment.WebInjectionContainer.newInstance(WebInjectionContainer.java:72)
    org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    java.lang.Thread.run(Thread.java:701)</p>

<p>note The full stack trace of the root cause is available in the JBoss Web/7.0.13.Final logs.
JBoss Web/7.0.13.Final</p></blockquote>

<p>Let&rsquo;s see the logs</p>

<pre><code>$ ssh SHA@APP-DOMAIN.rhcloud.com
[APP-DOMAIN.rhcloud.com SHA]\&gt; cd $OPENSHIFT_LOG_DIR
[APP-DOMAIN.rhcloud.com logs]\&gt; pwd
/var/lib/openshift/SHA/app-root/logs
$ scp  SHA@APP-DOMAIN.rhcloud.com:/var/lib/openshift/SHA/app-root/logs/jbossas.log "~/upstream.jbossas.log"
jbossas.log                                   100%  249KB 124.3KB/s   00:02
$ npp "~/upstream.jbossas.log"
</code></pre>

<p>&hellip;</p>

<blockquote><p>2014/05/26 15:57:26,679 WARN  [org.jboss.modules] (http-127.2.148.129-127.2.148.129-8080-1) Failed to define class\
gr.uoa.di.monitoring.server.servlets.DataCollectionServlet in Module &ldquo;deployment.ROOT.war:main&rdquo; from Service Module Loader:\
java.lang.UnsupportedClassVersionError: gr/uoa/di/monitoring/server/servlets/DataCollectionServlet : Unsupported major.minor version 51.0</p></blockquote>

<p>oh well I have to enable java7 for the project - unfortunately this is done via a &ldquo;marker&rdquo; and trying to do it via rhc did not really help:</p>

<pre><code>$ rhc ssh jbossas
[APP-DOMAIN.rhcloud.com SHA]\&gt; export
# ...
declare -x JAVA_HOME="/etc/alternatives/java_sdk_1.6.0"
# ...
[APP-DOMAIN.rhcloud.com SHA]\&gt; export JAVA_HOME=/etc/al
ternatives/java_sdk_1.7.0
[APP-DOMAIN.rhcloud.com SHA]\&gt; ctl_app restart
Cart to restart?
1. jbossas-7
?  1
</code></pre>

<p>Did not have an effect (found <a href="http://blog.anthavio.net/2014/01/openshift-system-properties-and.html">this blog post</a> which explains some). I managed though - via the eclipse tools - OpenSHift Explorer > Right click on your app > Edit environmental variables:</p>

<p><img class="center" src="http://Utumno.github.io/images/OpenShift/setting_up_java7.jpg" title="image" alt="images"></p>

<p>And that was it !</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Eclipz]]></title>
    <link href="http://Utumno.github.io/blog/2014/05/02/eclipz/"/>
    <updated>2014-05-02T22:01:04+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/05/02/eclipz</id>
    <content type="html"><![CDATA[<h5>Notes to zelf</h5>

<ul>
<li><p>Red exclamation mark - project won&rsquo;t build - would not say why. Renamed the mains to main1 still no joy.
Finally went to <em>Build Path > Order and Export</em> and ticked export on the JRE</p>

<pre><code>    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;classpath&gt;
       &lt;classpathentry excluding="gr/uoa/di/mde515/engine/HeapFile.java" kind="src" path="src"/&gt;
   -   &lt;classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/&gt;
   +   &lt;classpathentry exported="true" kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/&gt;
       &lt;classpathentry kind="output" path="bin"/&gt;
    &lt;/classpath&gt;
</code></pre>

<p>Lo and behold -> red <span style="color:red">!</span> became red <span style="color:red">x</span>.<br/>
Maybe a bug in caching ? (noted this after the <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=433927">Stack Overflows</a>). I then unticked the JRE and still builds ok. <a href="http://www.scottdstrader.com/blog/ether_archives/000921.html">See</a>. <a href="http://stackoverflow.com/questions/3632632/the-project-cannot-be-built-until-the-build-path-errors-are-resolved">Clean</a> did not work and <a href="http://stackoverflow.com/questions/12784078/error-in-eclipse-the-project-cannot-be-built-until-build-path-errors-are-resol">I had no missing libs</a> either.</p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Java Memorabilia]]></title>
    <link href="http://Utumno.github.io/blog/2014/04/06/java-memorabilia/"/>
    <updated>2014-04-06T17:31:00+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/04/06/java-memorabilia</id>
    <content type="html"><![CDATA[<h2>Remember erasure ?</h2>

<pre><code>import java.util.ArrayList;
import java.util.List;

public class Main {

    public static void main(String[] args) {
        List&lt;String&gt; strings = new ArrayList&lt;&gt;();
        ((List) strings).add(42); // compiler warning - ok at runtime
        // String s = strings.get(0); //  CCE - Compiler-generated cast
        System.out.println("strings: " + strings); // strings: [42]
        System.out.println(strings.contains(42)); // true
    }
}
</code></pre>

<p>In other words:</p>

<pre><code>    final HashSet&lt;Integer&gt; hashSet = new HashSet&lt;&gt;();
    // Set&lt;String&gt; cast = (Set&lt;String&gt;) hashSet; // error
    Set&lt;String&gt; cast = (Set) hashSet; // warning
</code></pre>

<p>From: <a href="http://stackoverflow.com/questions/19610569/android-sharedpreferences-null-keys-values-and-sets-corner-cases">here</a>
and <a href="http://books.google.gr/books?id=ka2VUBqHiWkC&amp;pg=PA144&amp;lpg=PA144&amp;source=bl&amp;ots=yYKmRmr5Q3&amp;sig=HESfg8Y3UaprOvN7GyF1XYN-DW8&amp;hl=en&amp;sa=X&amp;ei=0Pe6UunkBMavygPz64CAAw&amp;redir_esc=y#v=onepage&amp;q&amp;f=false">here</a></p>

<!-- more -->


<h3>Remember printing (and <a href="http://stackoverflow.com/questions/2925153/can-i-pass-an-array-as-arguments-to-a-method-with-variable-arguments-in-java/2926653#2926653">varargs</a>) ?</h3>

<p><a href="http://stackoverflow.com/a/19638956/281545"><code>Arrays.toString(map.entrySet().toArray());</code></a></p>

<p>as opposed to:</p>

<p><a href="http://stackoverflow.com/a/17520983/281545"><code>int[] a = { 1, 2, 3 };
System.out.println(Arrays.asList(a)); // \[\[I@70cdd2\] // List&lt;int[]&gt;
</code></a></p>

<h4>Remember generics ?</h4>

<ul>
<li><p><a href="http://stackoverflow.com/q/7160980/281545">How to implement an interface with an enum, where the interface extends Comparable?</a></p>

<pre><code>public interface Foo extends Comparable&lt;Foo&gt; {}
public enum FooImpl implements Foo {}
// java.lang.Comparable cannot be inherited with different arguments: &lt;Foo&gt; and &lt;FooImpl&gt;

// Solution:
public interface Foo&lt;SelfType extends Foo&lt;SelfType&gt;&gt; extends Comparable&lt;SelfType&gt; {}
public enum FooImpl implements Foo&lt;FooImpl&gt; {}
</code></pre></li>
<li><a href="http://stackoverflow.com/questions/6643241/why-cant-you-have-multiple-interfaces-in-a-bounded-wildcard-generic">Why can&rsquo;t you have multiple interfaces in a bounded wildcard generic?</a></li>
</ul>


<h5>Trivia</h5>

<ul>
<li><a href="http://www.vertigrated.com/blog/2011/02/interface-and-class-naming-anti-patterns-java-naming-convention-tautologies/">Interface and Class Naming Anti-Patterns</a></li>
<li><a href="http://stackoverflow.com/q/3881/281545">IAE vs NPE</a></li>
<li><a href="http://stackoverflow.com/q/4186320/281545">Why cast after an instanceOf?</a></li>
<li><a href="http://stackoverflow.com/q/161633/281545">Should methods in a Java interface be declared with or without a public access modifier?</a></li>
<li><a href="http://stackoverflow.com/a/12157504/281545">.clone() or Arrays.copyOf()?</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Autohotkey Script for Cmd]]></title>
    <link href="http://Utumno.github.io/blog/2014/04/05/autohotkey-script-for-cmd/"/>
    <updated>2014-04-05T17:14:35+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/04/05/autohotkey-script-for-cmd</id>
    <content type="html"><![CDATA[<p>Using windows without Autohotkey is using linux with no shell. No - I mean it.</p>

<p>For instance sooner or later you will use the cmd - this makes the xp bearable:</p>

<pre><code>;-------------------------------------------------------------------------------

; Redefine only when the active window is a console window
#IfWinActive ahk_class ConsoleWindowClass

; Close Command Window with Ctrl+w
$^w::
WinGetTitle sTitle
If (InStr(sTitle, "-")=0) {
        Send EXIT{Enter}
} else {
        Send ^w
}
return

; Ctrl+up / Down to scroll command window back and forward
^Up::
Send {WheelUp}
return

^Down::
Send {WheelDown}
return

; Paste in command window
^V::
; Spanish menu (Editar-&gt;Pegar, I suppose English version is the same, Edit-&gt;Paste)
Send !{Space}
Send {up}{up}{up}{up}{right}{down}{down}{enter}
return

; Mark in command window
^M::
Send !{Space}
Send {up}{up}{up}{up}{right}{enter}
return

; Select all in command window
^A::
Send !{Space}
Send {up}{up}{up}{up}{right}{down}{down}{down}{enter}
return

#IfWinActive

;-------------------------------------------------------------------------------
</code></pre>

<p>Some spanish guy holds the copyright I guess :D</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pythons (2) and Unicode]]></title>
    <link href="http://Utumno.github.io/blog/2014/04/05/pythons-and-unicode/"/>
    <updated>2014-04-05T13:25:16+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/04/05/pythons-and-unicode</id>
    <content type="html"><![CDATA[<p><a href="https://pythonhosted.org/kitchen/unicode-frustrations.html">Repeat after me</a>:  Each unicode encoding (UTF-8, UTF-7, UTF-16, UTF-32, etc) maps different sequences of bytes to the unicode code points (therefore might as well map same sequences of bytes to different unicode code points)</p>

<p>Types:</p>

<ul>
<li>The <code>unicode</code> type stores an abstract sequence of code points. Each code point represents a grapheme.</li>
<li><code>str</code> is for strings of bytes. These are very similar in nature to how strings are handled in C.</li>
</ul>


<p><a href="https://stackoverflow.com/questions/10288016/usage-of-unicode-and-encode-functions-in-python/10288438#10288438"><code>uni.encode(encoding): Unicode string to a Python byte string
s.decode(encoding): convert a byte string to a Unicode string
unicode(s, encoding): convert a byte string to a Unicode string
</code></a></p>

<p>Important - <a href="https://docs.python.org/dev/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit">Python 3</a>. Important not only for guidelines but also for <a href="https://stackoverflow.com/questions/10288016/usage-of-unicode-and-encode-functions-in-python/10288438#comment13236781_10288016">clarity</a>. Moreover many &ldquo;solutions&rdquo; floating on the web are Python 3 (<a href="https://docs.python.org/3.1/library/functions.html#open"><code>open()</code></a> has <strong>both</strong> an encoding <em>and</em> newlines param in P3. ). Speaking of 2:</p>

<pre><code>with open("file.txt", 'wb')as out:
    out.write('\n')
with open("file2.txt", 'w')as out:
    out.write('\n')
print(os.stat('file.txt').st_size)  # 1
print(os.stat('file2.txt').st_size)  # 2
</code></pre>

<p>Refs:</p>

<ul>
<li><a href="http://farmdev.com/talks/unicode/">Unicode In Python, Completely Demystified</a> - best slides I&rsquo;ve seen, if you have the template comment !</li>
<li><a href="http://stackoverflow.com/questions/339537/end-line-characters-from-lines-read-from-text-file-using-python/339842#339842">Strip newlines</a></li>
<li><a href="http://stackoverflow.com/questions/1223289/how-to-write-native-newline-character-to-a-file-descriptor-in-python">os.linesep</a></li>
<li><code>raise MyException(u'Cannot do this while at a café')</code></li>
<li><a href="https://docs.python.org/dev/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit">the standard library remains ASCII-only with the exception of contributor names in comments.</a></li>
<li><a href="https://docs.python.org/2/howto/unicode.html">Ref</a></li>
<li><a href="http://stackoverflow.com/a/12764646/281545">Encode and decode as needed</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Occasional C]]></title>
    <link href="http://Utumno.github.io/blog/2014/04/01/occasional-c/"/>
    <updated>2014-04-01T16:30:31+01:00</updated>
    <id>http://Utumno.github.io/blog/2014/04/01/occasional-c</id>
    <content type="html"><![CDATA[<p>When I happen to revisit this slim dinosaur that is C I always have to look up a couple things - here they are for your convenience and mine.</p>

<p>First things first - wrong:</p>

<pre><code>int *ptr = malloc(10 * sizeof (int));
</code></pre>

<p>Right:</p>

<pre><code>int *ptr = malloc(10 * sizeof *ptr);
</code></pre>

<p>NO exceptions. A, yes, sizeof is a <a href="http://en.wikipedia.org/wiki/Sizeof">unary operator</a>.
 Are parentheses needed ? Well, I always add them when nobody&rsquo;s looking.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Github Pages]]></title>
    <link href="http://Utumno.github.io/blog/2014/03/26/github-pages/"/>
    <updated>2014-03-26T16:54:20+00:00</updated>
    <id>http://Utumno.github.io/blog/2014/03/26/github-pages</id>
    <content type="html"><![CDATA[<p>Another 15 minutes fiddling with google so:</p>

<p>Sites:</p>

<pre><code>http://wrye-bash.github.io/docs/Wrye%20Bash%20General%20Readme.html
http://msysgit.github.io/
http://utumno.github.io/blog/2013/12/21/set-up-octopress-in-windows-7/
</code></pre>

<p>Code:</p>

<pre><code>https://github.com/wrye-bash/wrye-bash.github.io/blob/master/docs/Wrye%20Bash%20General%20Readme.html
https://github.com/msysgit/msysgit.github.com/blob/master/index.html # com
https://github.com/Utumno/Utumno.github.io/blob/master/blog/2013/12/21/set-up-octopress-in-windows-7/index.html
</code></pre>

<p>Notice that <code>https://wrye-bash.github.io/</code> gives a 404 - there should be an <code>https://github.com/wrye-bash/wrye-bash.github.io/blob/master/index.html</code> apparently.</p>

<p>I &rsquo;m sure this post will grow.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Glassfish MySQL Connection Pools & Resources]]></title>
    <link href="http://Utumno.github.io/blog/2014/02/02/glassfish-connection-pools/"/>
    <updated>2014-02-02T12:39:27+00:00</updated>
    <id>http://Utumno.github.io/blog/2014/02/02/glassfish-connection-pools</id>
    <content type="html"><![CDATA[<p>Fire up the glassfish admin console at <a href="http://localhost:4848.">http://localhost:4848.</a> You will see something like:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard01.bmp" title="image" alt="images"></p>

<p>Select the JDBC Connection Pools item and then new:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard02.bmp" title="image" alt="images"></p>

<p>Enter the values below: <!-- more --></p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard05.bmp" title="image" alt="images"></p>

<p>Press next and face a table with 213 additional properties, all together. Morons. Anyway:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard08.bmp" title="image" alt="images"></p>

<p>and:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard07a.bmp" title="image" alt="images"></p>

<p>and:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard07b.bmp" title="image" alt="images"></p>

<p>and:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard09.bmp" title="image" alt="images"></p>

<p>and:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard10.bmp" title="image" alt="images"></p>

<p>Done!</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard11.bmp" title="image" alt="images"></p>

<p>Now for the resource:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard12.bmp" title="image" alt="images"></p>

<p>and:</p>

<p><img class="center" src="http://Utumno.github.io/images/Glassfish_Connection_Pools/Clipboard13.bmp" title="image" alt="images"></p>

<p>Hit OK.</p>

<p>See also:</p>

<p><a href="http://stackoverflow.com/questions/18339081/java-ee-7-glassfish-4-0-restful-webservices-using-and-netbean-and-deploying-on-g/18340894#18340894">Java EE 7 GlassFish 4.0 Restful Webservices using and Netbean and deploying on Glassfish 4.0</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Python's Super]]></title>
    <link href="http://Utumno.github.io/blog/2014/01/05/pythons-super/"/>
    <updated>2014-01-05T14:45:20+00:00</updated>
    <id>http://Utumno.github.io/blog/2014/01/05/pythons-super</id>
    <content type="html"><![CDATA[<p>First thing that comes to mind : why do I need to name the superclass explicitly, instead of passing in <code>self.__class__</code> (or better still, <code>type(self)</code>)  ?
<a href="http://stackoverflow.com/questions/18208683/when-calling-super-in-a-derived-class-can-i-pass-in-self-class/18208725#18208725">Because</a>:</p>

<!--``` linenos:false-->


<pre><code>class Base(object):
    def method(self):
        print 'original'

class Derived(Base):
    def method(self):
        print 'derived'
        super(type(self), self).method()

class Subclass(Derived):
    def method(self):
        print 'subclass of derived'
        super(Subclass, self).method()
</code></pre>

<!-- ``` -->


<p>leads to:</p>

<pre><code>&gt;&gt;&gt; Subclass().method()
subclass of derived
derived
derived
derived
&lt;...&gt;
  File "&lt;stdin&gt;", line 4, in method
  File "&lt;stdin&gt;", line 4, in method
  File "&lt;stdin&gt;", line 4, in method
RuntimeError: maximum recursion depth exceeded while calling a Python object
</code></pre>

<p>And this pretty much explains the second question I had. <!-- more --> In <a href="https://fuhm.net/super-harmful/">Python&rsquo;s Super is nifty, but you can&rsquo;t use it</a>
(Previously: Python&rsquo;s Super Considered Harmful) we read:</p>

<blockquote><p>People omit calls to <code>super(...).__init__</code> if the only superclass is &lsquo;object&rsquo;, as, after all, <code>object.__init__</code> doesn&rsquo;t do anything! However, this is very incorrect. Doing so will cause other classes&#8217; <code>__init__</code> methods to not be called.</p></blockquote>

<p>But it does not say why (insert rant here). Btw <a href="http://stackoverflow.com/questions/8972866/correct-way-to-use-super-argument-passing">not all of his examples compile</a> (see this link also for a nice hack when you need to have arguments passed in the init method, and can&rsquo;t pop them one by one).</p>

<p>Well that&rsquo;s a pile of gibberish <em>if there were only single inheritance</em>. Calling <code>super(...).__init__</code> in a class whose only superclass is &lsquo;object&rsquo; is then as useless as a used chewing gum. But the catch is that there is no such thing as single inheritance in python. So when we have MI, and our &ldquo;penultimate&rdquo; base class (that is the one that inherits directly from object) is used as a superclass in an unrelated MI class the call <code>super(...).__init__</code> will not delegate to object  init but in the next class in the MRO. <a href="">Example</a>:</p>

<pre><code>class Service(object):
    def __init__(self, host, binary, topic, manager, report_interval=None,
             periodic_interval=None, *args, **kwargs):
        print 'Initializing Service'
        super(Service, self).__init__(*args, **kwargs)

class Color(object):
    def __init__(self, color='red', **kwargs):
        print 'Initializing Color'
        self.color = color
        super(Color, self).__init__(**kwargs)

class ColoredService(Service, Color):
    def __init__(self, *args, **kwds):
        print 'Initializing Colored Service'
        super(ColoredService, self).__init__(*args, **kwds)

c = ColoredService('host', 'bin', 'top', 'mgr', 'ivl', color='blue')
</code></pre>

<p>gives:</p>

<pre><code>Initializing Colored Service
Initializing Service
Initializing Color
</code></pre>

<p>Why ? The call <code>super(Service, self).__init__(*args, **kwargs)</code> calls the next method in <em>self</em>&rsquo;s MRO - <em>self</em> being an instance of ColoredService. So the MRO is derived from the instance passed into super&rsquo;s <em>second argument</em> (you may also pass a type, haven&rsquo;t gone into this) while <em>the starting point in the MRO</em> is derived from super&rsquo;s first argument.</p>

<pre><code>super(startFromThisType, getTheMROFromThisInstance)
</code></pre>

<p>And that explains why one must always call super in a method meant to be overridden in a MI setting but when we need also the super class implementation.</p>

<p>Btw for Java people - <a href="http://stackoverflow.com/questions/2399307/python-invoke-super-constructor/2399332#2399332">there is no automatic constructor call in  Python</a>. You must call <code>super.__init__</code> manually and that&rsquo;s where this post comes from.</p>

<p>References:</p>

<ul>
<li>Things to Know About Python Super <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=236275">[1 of 3]</a>, <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=236278">[2 of 3]</a>, <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=237121">[3 of 3]</a></li>
<li><a href="http://www.python.org/download/releases/2.3/mro/">The Python 2.3 Method Resolution Order</a></li>
<li><a href="http://docs.python.org/2/library/functions.html#super">super(type[, object-or-type])</a></li>
<li><a href="http://users.rcn.com/python/download/Descriptor.htm">Descriptors</a> (in my toread)</li>
<li><a href="http://rhettinger.wordpress.com/2011/05/26/super-considered-super/">Python&rsquo;s super() considered super!</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set Up Octopress in Windows 7]]></title>
    <link href="http://Utumno.github.io/blog/2013/12/21/set-up-octopress-in-windows-7/"/>
    <updated>2013-12-21T21:32:47+00:00</updated>
    <id>http://Utumno.github.io/blog/2013/12/21/set-up-octopress-in-windows-7</id>
    <content type="html"><![CDATA[<p>Download ruby from <a href="http://rubyinstaller.org/downloads/">here</a> - I downloaded <code>rubyinstaller-1.9.3-p448.exe</code></p>

<p>Install it, add it to path then create a folder to host octopress and your blog (in DB naturlich) and fire up git bash.</p>

<pre><code>Welcome to Git (version 1.8.4-preview20130916) # how are you ?

MrD@MRSD /c/dropbox/Udun
$ ruby --version
ruby 1.9.3p448 (2013-06-27) [i386-mingw32]

MrD@MRSD /c/dropbox/Udun
$ git clone git://github.com/imathis/octopress.git
Cloning into 'octopress'...
remote: Counting objects: 10967, done.
remote: Compressing objects: 100% (5107/5107), done.
remote: Total 10967 (delta 5807), reused 9843 (delta 4984)
Receiving objects: 100% (10967/10967), 2.46 MiB | 82.00 KiB/s, done.
Resolving deltas: 100% (5807/5807), done.
Checking connectivity... done

MrD@MRSD /c/dropbox/Udun
$ cd octopress/

MrD@MRSD /c/dropbox/Udun/octopress (master)
$ gem install bundler
Fetching: bundler-1.3.5.gem (100%)
Successfully installed bundler-1.3.5
1 gem installed
Installing ri documentation for bundler-1.3.5...
Installing RDoc documentation for bundler-1.3.5...

MrD@MRSD /c/dropbox/Udun/octopress (master)
$ bundle install
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (0.9.2.2)
Installing RedCloth (4.2.9)
Installing chunky_png (1.2.5)
Installing fast-stemmer (1.0.1)
Gem::InstallError: The 'fast-stemmer' native gem requires installed build tools.


Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'
An error occurred while installing fast-stemmer (1.0.1), and Bundler cannot
continue.
Make sure that `gem install fast-stemmer -v '1.0.1'` succeeds before bundling.
</code></pre>

<p>Oops. Install<sup>1</sup> <a href="http://rubyinstaller.org/downloads/">RubyDevKit</a> - I downloaded <code>DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe</code>. Install means unzip - I unzipped into C:\_\Ruby. Then</p>

<!-- more -->


<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (master)
$ cd C:/_/Ruby

MrD@MRSD /c/_/Ruby
$ ruby dk.rb init
[INFO] found RubyInstaller v1.9.3 at C:/_/Ruby193

Initialization complete! Please review and modify the auto-generated
'config.yml' file to ensure it contains the root directories to all
of the installed Rubies you want enhanced by the DevKit.

MrD@MRSD /c/_/Ruby
$ ruby dk.rb install
[INFO] Updating convenience notice gem override for 'C:/_/Ruby193'
[INFO] Installing 'C:/_/Ruby193/lib/ruby/site_ruby/devkit.rb'

MrD@MRSD /c/_/Ruby
$ cd /c/dropbox/Udun/octopress

MrD@MRSD /c/dropbox/Udun/octopress (master)
$ bundle install
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (0.9.2.2)
Using RedCloth (4.2.9)
Using chunky_png (1.2.5)
Installing fast-stemmer (1.0.1)
Installing classifier (1.3.3)
Installing fssm (0.2.9)
Installing sass (3.2.9)
Installing compass (0.12.2)
Installing directory_watcher (1.4.1)
Installing haml (3.1.7)
Installing kramdown (0.13.8)
Installing liquid (2.3.0)
Installing syntax (1.0.0)
Installing maruku (0.6.1)
Installing posix-spawn (0.3.6)
Installing yajl-ruby (1.1.0)
Installing pygments.rb (0.3.4)
Installing jekyll (0.12.0)
Installing rack (1.5.2)
Installing rack-protection (1.5.0)
Installing rb-fsevent (0.9.1)
Installing rdiscount (2.0.7.3)
Installing rubypants (0.2.0)
Installing sass-globbing (1.0.0)
Installing tilt (1.3.7)
Installing sinatra (1.4.2)
Installing stringex (1.4.0)
Using bundler (1.3.5)
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.

MrD@MRSD /c/dropbox/Udun/octopress (master)
$ rake install
## Copying classic theme into ./source and ./sass
mkdir -p source
cp -r .themes/classic/source/. source
mkdir -p sass
cp -r .themes/classic/sass/. sass
mkdir -p source/_posts
mkdir -p public
</code></pre>

<p>This has created a host of untracked files in <code>sass/</code> and <code>source/</code></p>

<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (master)
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#       modified:   Gemfile.lock
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#       sass/
#       source/
no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>

<p>And here is the diff for <code>Gemfile.lock</code></p>

<pre><code> GEM
   remote: https://rubygems.org/
   specs:
     RedCloth (4.2.9)
+    RedCloth (4.2.9-x86-mingw32)
     chunky_png (1.2.5)
     classifier (1.3.3)
       fast-stemmer (&gt;= 1.0.0)
     compass (0.12.2)
       chunky_png (~&gt; 1.2)
@@ -44,13 +45,15 @@ GEM
       tilt (~&gt; 1.3, &gt;= 1.3.4)
     stringex (1.4.0)
     syntax (1.0.0)
     tilt (1.3.7)
     yajl-ruby (1.1.0)
+    yajl-ruby (1.1.0-x86-mingw32)

 PLATFORMS
   ruby
+  x86-mingw32

 DEPENDENCIES
   RedCloth (~&gt; 4.2.9)
   compass (~&gt; 0.12.2)
   directory_watcher (= 1.4.1)
</code></pre>

<p>I know as much ruby as Sanskrit but it&rsquo;s up and running.</p>

<h3>Github Pages</h3>

<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (master)
$ rake setup_github_pages
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.io.git)
           or 'https://github.com/your_username/your_username.github.io')
Repository url: https://github.com/Utumno/Utumno.github.io
Added remote https://github.com/Utumno/Utumno.github.io as origin
Set origin as default remote
Master branch renamed to 'source' for committing your blog source files
rm -rf _deploy
mkdir _deploy
cd _deploy
Initialized empty Git repository in c:/dropbox/Udun/octopress/_deploy/.git/
'My Octopress Page is coming soon
'hellip' is not recognized as an internal or external command,
operable program or batch file.
[master (root-commit) 792f51e] Octopress init
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 index.html
cd -

---
## Now you can deploy to https://github.com/Utumno/Utumno.github.io with `rake d
eploy` ##

MrD@MRSD /c/dropbox/Udun/octopress (source)
$ git status
# On branch source
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#       modified:   Gemfile.lock
#       modified:   Rakefile
#       modified:   _config.yml
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#       sass/
#       source/
no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>

<p>Diffs - Rakefile:</p>

<pre><code>@@ -7,14 +7,14 @@ require "stringex"
 ssh_user       = "user@domain.com"
 ssh_port       = "22"
 document_root  = "~/website.com/"
 rsync_delete   = false
 rsync_args     = ""  # Any extra arguments to pass to rsync
-deploy_default = "rsync"
+deploy_default = "push"

 # This will be configured for you when you run config_deploy
-deploy_branch  = "gh-pages"
+deploy_branch  = "master"
</code></pre>

<p>_config.yml:</p>

<pre><code> ## -- Misc Configs -- ##

 public_dir      = "public"    # compiled site directory
 source_dir      = "source"    # source file directory

@@ -1,10 +1,10 @@
 # ----------------------- #
 #      Main Configs       #
 # ----------------------- #

-url: http://yoursite.com
+url: http://Utumno.github.io
 title: My Octopress Blog
 subtitle: A blogging framework for hackers.
 author: Your Name
 simple_search: http://google.com/search
 description:
</code></pre>

<p>What all this means is that you are now on branch <code>source</code></p>

<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (source)
$  git branch -a
* source
  remotes/octopress/2.5
  remotes/octopress/2.5-simplify-rakefile
  remotes/octopress/3.0
  remotes/octopress/HEAD -&gt; octopress/master
  remotes/octopress/commander
  remotes/octopress/gh-pages
  remotes/octopress/guard
  remotes/octopress/jekyll-1-3
  remotes/octopress/linklog
  remotes/octopress/master
  remotes/octopress/migrator
  remotes/octopress/refactor_with_tests
  remotes/octopress/rubygemcli
  remotes/octopress/site
  remotes/octopress/site-2.
</code></pre>

<p>Huh ? Where is master ? It&rsquo;s in the <code>_deploy</code> folder. You can push/pull via git but better use the supplied rake commands (see below).</p>

<h3>Blogging</h3>

<p>First, commit all fluff so far</p>

<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (source)
$ git add .

MrD@MRSD /c/dropbox/Udun/octopress (source)
$ git commit -m"Octopress autogenerated files"
[source 8794e51] Octopress autogenerated files
 120 files changed, 2787 insertions(+), 3 deletions(-)
# yada yada
</code></pre>

<p>Now we can start blogging finally:</p>

<pre><code>MrD@MRSD /c/dropbox/Udun/octopress (source)
$ rake new_post["Set up octopress in windows 7"]
mkdir -p source/_posts
Creating new post: source/_posts/2013-12-21-set-up-octopress-in-windows-7.markdo
wn


MrD@MRSD /c/dropbox/Udun/octopress (source)
$ rake preview
Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
directory source/stylesheets/
   create source/stylesheets/screen.css
Configuration from c:/dropbox/Udun/octopress/_config.yml
&gt;&gt;&gt; Change detected at 23:44:18 to: screen.scss
Auto-regenerating enabled: source -&gt; public
[2013-12-21 23:44:18] regeneration: 94 files changed
identical public/stylesheets/screen.css

Dear developers making use of FSSM in your projects,
FSSM is essentially dead at this point. Further development will
be taking place in the new shared guard/listen project. Please
let us know if you need help transitioning! ^_^b
- Travis Tilley
</code></pre>

<p>I dunno what this last piece of laurem ipsum is. Anyway - go ahead, edit your post, change things in the layout (more on this later) and commit your changes as per healthy git practices (you are on the source branch). Your customizations should go to <code>source/_includes/custom</code>. When ready do :</p>

<pre><code>MrD@MRSD /c/Dropbox/Udun/octopress (source)
$ rake generate
## Generating Site with Jekyll
identical source/stylesheets/screen.css
Configuration from C:/Dropbox/Udun/octopress/_config.yml
Building site: source -&gt; public
Successfully generated site: source -&gt; public

MrD@MRSD /c/Dropbox/Udun/octopress (source)
$ rake deploy
## Found posts in preview mode, regenerating files ...
## Generating Site with Jekyll
identical source/stylesheets/screen.css
Configuration from C:/Dropbox/Udun/octopress/_config.yml
Building site: source -&gt; public
Successfully generated site: source -&gt; public
## Deploying branch to Github Pages
## Pulling any updates from Github Pages
cd _deploy
There is no tracking information for the current branch.
Please specify which branch you want to merge with.
See git-pull(1) for details

    git pull &lt;remote&gt; &lt;branch&gt;

If you wish to set tracking information for this branch you can do so with:

    git branch --set-upstream-to=origin/&lt;branch&gt; master

cd -
rm -rf _deploy/index.html

## Copying public to _deploy
cp -r public/. _deploy
cd _deploy

## Committing: Site updated at 2013-12-23 21:04:31 UTC
[master 9857750] Site updated at 2013-12-23 21:04:31 UTC
 69 files changed, 3044 insertions(+)
 # yada yada

## Pushing generated _deploy website
Username for 'https://github.com':
## Github Pages deploy complete
cd -
</code></pre>

<p>Then (and only then) commit your source (only then for github to set your default branch as master)</p>

<pre><code>MrD@MRSD /c/Dropbox/Udun/octopress (source)
$ git push origin source
Username for 'https://github.com': Utumno
Password for 'https://Utumno@github.com':
Counting objects: 4752, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (2056/2056), done.
Writing objects: 100% (4752/4752), 1.20 MiB | 1.14 MiB/s, done.
Total 4752 (delta 2476), reused 4520 (delta 2320)
To https://github.com/Utumno/Utumno.github.io
* [new branch]      source -&gt; source
</code></pre>

<p>If you want to update octopress itself <a href="http://octopress.org/docs/updating/">you should run</a> :</p>

<pre><code>git pull octopress master # Get the latest Octopress
bundle install # Keep gems updated
rake update_source # update the template's source
rake update_style # update the template's style
</code></pre>

<p>(but read the link above)</p>

<p><sup>1</sup>: got the commands from <a href="http://stb.techelex.com/setup-octopress-on-windows7/">here</a>. I don&rsquo;t have a clue what they do - but will come back to it.</p>
]]></content>
  </entry>
  
</feed>
